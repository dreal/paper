\section{The SReach tool}\label{apndx:usage}
\subsection{Input format}
The inputs to our {\bf SReach} tool are descriptions of hybrid automata with random variables (representing the probabilistic system parameters), and the reachability property to be checked. Following roughly the same format as the above definition of hybrid automata, and adding the declarations of random variables, 
the description of an automaton is as follows.

{\bf Preprocessor.} We can use the C language syntax to define constants and macros. It can also be used
for defining random variables --- see below.
%When defining, random variables, which will be declared later, can also be used. 

\begin{comment}
For example, we can write,\\

$\#define\;\; x \;\;2.0$\\
$\#define\;\; y\;\; (z^2 \;+\; 1)$\\

where $z$ can be a random variable.\\
\end{comment}

{\bf Variable declaration.} For a random variable, the declaration specifies its distribution and name. For the variables which are not random variables, they are required to be declared within bounds. 
\begin{comment}
with the format - $Dist \; \; var_nam;$, where currently "$Dist$" can be "$B(p)$" (Bernoulli distribution), "$U(p, \;q)$" (Uniform distribution), "$N(p, \;q)$" (Gaussian distribution), and "$E(p)$" (Exponential distribution). $p$ and $q$ are parameters for these distributions. (Note: it is easy to include additional distributions if needed.)

For instance,\\
$[-10, \; 20.1]\; \;  x;$\\
\end{comment}

{\bf Hybrid automaton.} A hybrid automaton is represented by a set of modes. Within each mode declaration, users can specify statements for mode invariant(s), flow function(s), and jump condition(s). For a mode invariant, we can give any logic formula of the variables. For a flow function, it is expressed by an ODE.  As for a jump condition, it is written as 
\begin{verbatim} 
<logic_formula1>  ==> @<tagert_mode>  <logic_formula2>,
\end{verbatim}
where the first logic formula is given as the guard of the jump, and the second one specifies the reset condition after the jump.

\begin{comment}
each differential equation is of the format: "$d/dt \; [<var>]\;\;=\;\;<fun>;$". 

$
\{\;\; mode \;\; <int>;\\
invt: \;\; <mode\_invariant\; block>\\
flow: \;\; <ODE\; block>\\
jump: \;\; <jump\;block>\\
\}
$\\
\end{comment}


{\bf Initial conditions and Goals.} Following the declaration of modes, we can declare one initial mode with corresponding conditions, and the reachability properties in the end.\\
\begin{comment}
 via the following structure.\\

$
@Mode\_num\;\;\; [initial\_conditions]
$\\

{\bf Goals.} We can add the reachability properties in the end. Each property can be encoded in the following format.\\

$
@Mode\_num \;\;\; [reachability\_property]
$\\

\end{comment}

\noindent\textit{Example 3.1}. The following is an example input file. Currently, users can specify random variables with Bernoulli distribution, Uniform distribution, Gaussian distribution, and Exponential distribution. (Note: it is easy to include additional distributions if needed.)
\lstset{basicstyle=\ttfamily\small, numbers=left, breaklines=true }
\begin{lstlisting}
#define pi 3.1416
N(1,0.1) mu1;
U(10,15) thro;
E(0.49) theta1;
B(0.75) xinit;
[0,5] x;
[0,3] time;
{ mode 1; 
  invt:
         (x<=1.5);
         (x>=0);
  flow:
	 d/dt[x]=thro*(1/(theta1*sqrt(2*pi)))
	          *exp(0-((x-mu1)^2)/(2*theta1^2));
  jump:
        (x>=(thre1+5))==>@2(x'=x);
}
init:
@1	(x=xinit);
goal:
@4	(x>=50);
\end{lstlisting}

\subsection{Command line}
After building, {\bf SReach} can be simply used through:
\begin{verbatim} 
SReach <statistical_testing_option> <filename> <dReach> <k> <delta>
\end{verbatim} 
where:
\begin{itemize}
\item \verb+statistical_testing_option+ is a text file containing a sequence of test specifications. We will introduce the usages of statistical testing options in the following part;
\item \verb+filename+ is a .pdrh file describing the model of a hybrid system with probabilistic system parameters. It is of the input format described in last sub-section;
\item \verb+dReach+ is a bounded reachability analyzing tool for hybrid systems based on dReal;
\item \verb+k+ is the number of steps of the model that the tool will explore; and
\item \verb+delta+ is the precision for the $\delta$-decision problem.
\end{itemize}

\subsection{Statistical testing options}

{\bf SReach} can be used with different statistical testing methods through the following specifications.

\textit {Lai's test}: \verb+Lai <theta> <cost_per_sample>+, where \verb+theta+ indicates the probability threshold.
 
\textit {Bayes factor test}: \verb+BFT <theta> <T> <alpha> <beta>+,
where \verb+theta+ is a probability threshold satisfying \verb+0 < theta < 1+, \verb+T+ is a ratio threshold satisfying \verb+T > 1+, and \verb+alpha+, and \verb+beta+ are beta prior parameters.

\textit {BFT with indifference region}: \verb+BFTI <theta> <T> <alpha> <beta> <delta>+,
where, besides the parameters used in the above Bayes factor test, \verb+delta+ is given to create the indifference region - [$p_0$, $p_1$], where $p_0$ = \verb+theta+ + \verb+delta+ and $p_1$ = \verb+theta+  - \verb+delta+.  Now, it tests $H_0 :\; p \ge p_0$ against $H_1:\; p \le p_1$ .

\textit {Sequential probability ratio test (SPRT)}: \verb+SPRT <theta> <T> <delta>+.

\textit {Chernoff-Hoeffding bound}: \verb+CHB <delta1> <coverage_probability>+,
where \verb+delta1+ is the given precision, and \verb+coverage_probability+ indicates the confidence.

\textit {Bayesian Interval Estimation with Beta prior}: \\ \verb+BEST <delta1> <coverage_probability> <alpha> <beta>+.


