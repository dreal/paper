\section{Logical Encoding of Reachability}


The details of our encoding scheme is given in~\cite{DBLP:journals/corr/GaoKCC14}. 
Here we focus on explaining how differential equations and the universal quantifications 
generated by mode invariance conditions are encoded, as an extension of the SMT-LIB
~\cite{BarST-SMT-10} standard. Although such formulas are automatically generated by \dReach{}
from the hybrid system descrpition, the explanation below can be helpful for 
understanding the inner mechanism of our solver. 

\paragraph{Encoding integrations.}
In each mode of a hybrid system, we need to specify continuous flows defined 
by systems of ordinary differential equations. We extend SMT-LIB with a command
\texttt{define-ode} to define such systems. For instance, we use $\texttt{define-ode}$ as follows to
assign a name $\mathrm{flow_1}$ to a group of ODE,
$\frac{\mathrm{d}x}{\mathrm{d}t} = v$ and
$\frac{\mathrm{d}v}{\mathrm{d}t} = -9.8$.
\[
\texttt{(define-ode flow\_1 ((= d/dt[x] v) (= d/dt[v] -9.8)))}
\]
We then allow integration terms in the formula. We view the solution of system of differential equations 
as a constraint between the initial-state variables, time duration, and the end-state variables. We can then naturally write
\[
\texttt{(integral 0 t [x\_0\_0 x\_0\_1 ... x\_0\_n] flow\_i)}.
\]
Note that we do not include a variable in $\vec{x}^t$ such as
\texttt{x\_t\_n} because it can be inferred from the given time
\texttt{t} and $\vec{x}^0$ variables (such as \texttt{x\_0\_n}).

\paragraph{Universal quantification for mode invariant constriants.} To encode mode invariants in hybrid systems, we
need $\exists\forall^t$-formulas~\cite{DBLP:conf/fmcad/GaoKC13} which
is a restricted form of $\exists\forall$ formula where the universal
quantifications are limited to the time variables. In \drh{}, we
introduce a new keyword $\texttt{forall\_t}$ to encode
$\exists\forall^t$ formulas. Given a time bound $[0, time_i]$, mode
invariant f at mode $n$ is encoded into \texttt{(forall\_t n [0
  time\_i] f)}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
