\section{Logical Encoding of Reachability}

In this section, we explain the extensions and variable naming
convention that we make to the standard SMT-LIB~\cite{BarST-SMT-10} to
represent flows and mode invariants of hybrid systems. The detailed
encoding scheme is shown in~\cite{DBLP:journals/corr/GaoKCC14}

\paragraph{Variable naming convention}
In our encoding, a system variable $\texttt{x\_i\_p}$ has two
subscripts $i \in \mathbb{N}$ and $p \in \{0, t\}$. The first
subscript $i$ indicates that it represents the value of a system
variable $x$ at the $i$-th step. The second subscript $p \in \{0, t\}$
denotes the value at the begining of the mode (at the end of the mode,
respectively). For instance, $x\_0\_t$ denotes the value of variable
$x$ at the end of first mode (step $0$).

\paragraph{define-ode and integral}
A flow consists of a group of ordinary differential equations. In
\drh{}, we provide a command \texttt{define-ode} to associate a flow
with a name. For instance, we use $\texttt{define-ode}$ as follows to
assign a name $\mathrm{flow_1}$ to a group of ODE,
$\frac{\mathrm{d}x}{\mathrm{d}t} = v$ and
$\frac{\mathrm{d}v}{\mathrm{d}t} = -9.8$.
\[
\texttt{(define-ode flow\_1 ((= d/dt[x] v) (= d/dt[v] -9.8)))}
\]
To encode reachability properties of hybrid systems, we need a way to
formulate constraints between the initial variables $\vec{x}^0$ and the
final state variables $\vec{x}^t$ at time $t$. Let $\vec{g_i}$ be the
right-hand sides of the ODEs of $flow_i$. Then Using the
Picard-Lindel$\ddot{o}$f representation, we can formulate the
constraint as
\begin{align*}
[x_1^t, x_2^t, \dots, x_n^t] &= \int_0^t \vec{g}_i([x_1(s), x_2(s), \cdots,
x_n(s)]) \mathrm{d}s.
\end{align*}
In \drh{}, we introduce a keyword \texttt{integral} and encode the
above constraint as
\[
\texttt{(integral 0 t [x\_0\_0 x\_0\_1 ... x\_0\_n] flow\_i)}.
\]
Note that we do not include a variable in $\vec{x}^t$ such as
\texttt{x\_t\_n} because it can be inferred from the given time
\texttt{t} and $\vec{x}^0$ variables (such as \texttt{x\_0\_n}).
\paragraph{forall\_t} To encode mode invariants in hybrid systems, we
need $\exists\forall^t$-formulas~\cite{DBLP:conf/fmcad/GaoKC13} which
is a restricted form of $\exists\forall$ formula where the universal
quantifications are limited to the time variables. In \drh{}, we
introduce a new keyword $\texttt{forall\_t}$ to encode
$\exists\forall^t$ formulas. Given a time bound $[0, time_i]$, mode
invariant f at mode $n$ is encoded into \texttt{(forall\_t n [0
  time\_i] f)}.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
